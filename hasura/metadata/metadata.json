{
  "version": 3,
  "sources": [
    {
      "name": "default",
      "kind": "postgres",
      "configuration": {
        "connection_info": {
          "database_url": { "from_env": "HASURA_GRAPHQL_DATABASE_URL" },
          "isolation_level": "read-committed",
          "pool_settings": {}
        }
      },
      "tables": [
        {
          "table": { "schema": "public", "name": "Scenario" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "name", "ownerId", "createdAt", "updatedAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["name", "ownerId"]
              }
            }
          ],
          "array_relationships": [
            {
              "name": "accounts",
              "using": {
                "foreign_key_constraint_on": {
                  "table": { "schema": "public", "name": "Account" },
                  "columns": ["scenarioId"]
                }
              }
            }
          ]
        },
        {
          "table": { "schema": "public", "name": "Account" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "name", "type", "scenarioId", "ownerId", "createdAt", "updatedAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["name", "type", "scenarioId", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            {
              "name": "scenario",
              "using": { "foreign_key_constraint_on": "scenarioId" }
            }
          ],
          "array_relationships": [
            { "name": "balances", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "AccountBalance" }, "columns": ["accountId"] } } },
            { "name": "incomeEvents", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "IncomeEvent" }, "columns": ["accountId"] } } },
            { "name": "expenseEvents", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "ExpenseEvent" }, "columns": ["accountId"] } } },
            { "name": "outgoingTransfers", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "AccountTransfer" }, "columns": ["fromAccountId"] } } },
            { "name": "incomingTransfers", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "AccountTransfer" }, "columns": ["toAccountId"] } } },
            { "name": "recurringRules", "using": { "foreign_key_constraint_on": { "table": { "schema": "public", "name": "RecurringRule" }, "columns": ["accountId"] } } }
          ]
        },
        {
          "table": { "schema": "public", "name": "AccountBalance" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "date", "balance", "ledger", "accountId", "ownerId", "createdAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["date", "balance", "ledger", "accountId", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            { "name": "account", "using": { "foreign_key_constraint_on": "accountId" } }
          ]
        },
        {
          "table": { "schema": "public", "name": "IncomeEvent" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "date", "amount", "label", "ledger", "accountId", "ownerId", "createdAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["date", "amount", "label", "ledger", "accountId", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            { "name": "account", "using": { "foreign_key_constraint_on": "accountId" } }
          ]
        },
        {
          "table": { "schema": "public", "name": "ExpenseEvent" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "date", "amount", "category", "ledger", "accountId", "ownerId", "createdAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["date", "amount", "category", "ledger", "accountId", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            { "name": "account", "using": { "foreign_key_constraint_on": "accountId" } }
          ]
        },
        {
          "table": { "schema": "public", "name": "AccountTransfer" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "fromAccountId", "toAccountId", "amount", "date", "ledger", "ownerId", "createdAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["fromAccountId", "toAccountId", "amount", "date", "ledger", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            { "name": "fromAccount", "using": { "foreign_key_constraint_on": "fromAccountId" } },
            { "name": "toAccount", "using": { "foreign_key_constraint_on": "toAccountId" } }
          ]
        },
        {
          "table": { "schema": "public", "name": "RecurringRule" },
          "select_permissions": [
            {
              "role": "user",
              "permission": {
                "columns": ["id", "accountId", "type", "amount", "startDate", "endDate", "interval", "label", "category", "ledger", "ownerId", "createdAt", "updatedAt"],
                "filter": { "ownerId": { "_eq": "X-Hasura-User-Id" } }
              }
            }
          ],
          "insert_permissions": [
            {
              "role": "user",
              "permission": {
                "check": { "ownerId": { "_eq": "X-Hasura-User-Id" } },
                "set": { "ownerId": "X-Hasura-User-Id" },
                "columns": ["accountId", "type", "amount", "startDate", "endDate", "interval", "label", "category", "ledger", "ownerId"]
              }
            }
          ],
          "object_relationships": [
            { "name": "account", "using": { "foreign_key_constraint_on": "accountId" } }
          ]
        }
      ]
    }
  ]
}

